<!doctype html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <title>ランキング API 呼び出しサンプルページ</title>
        <link rel="icon" href="data:,">
        <script type="text/javascript">
            function call_api() {
                const formData = new FormData(document.forms["main-form"]);
                const params = new URLSearchParams({"category_id": formData.get("category_id")})
                const url = formData.get("url") + "?" + params
                fetch(url)
                    .then(res => {
                        document.getElementById("display-status").innerText = `${res.status} ${res.statusText}`
                        res.text()
                            .then(text => document.getElementById("display-response").innerText = text)
                            .catch(_ => document.getElementById("display-response").innerText = "（読み取れませんでした）")
                    })
                    .catch(err => {
                        document.getElementById("display-status").innerText = "不明なエラー"
                        document.getElementById("display-response").innerText = err.toString()
                    })
                ;
            }
        </script>
    </head>
    <body>
        <h1>ランキング API 呼び出しサンプルページ</h1>

        <form id="main-form" onsubmit="return false">
            <div>
                <label for="url">API の URL</label>
                <input type="text" name="url" size="60" value="http://localhost:8000/ranking" required>    
            </div>
            <div>
                <label for="category_id">カテゴリー</label>
                <select name="category_id">
                    <option value="DIY用品">DIY用品</option>
                    <option value="靴">靴</option>
                    <option value="家具">家具</option>
                    <option value="寝具">寝具</option>
                    <option value="雑貨">雑貨</option>
                    <option value="食品">食品</option>
                    <option value="飲料">飲料</option>
                    <option value="コスメ">コスメ</option>
                    <option value="婦人服">婦人服</option>
                    <option value="子供服">子供服</option>
                    <option value="文房具">文房具</option>
                    <option value="紳士服">紳士服</option>
                    <option value="家電製品">家電製品</option>
                    <option value="掃除用具">掃除用具</option>
                    <option value="インテリア">インテリア</option>
                    <option value="ヘルスケア">ヘルスケア</option>
                    <option value="ベビー用品">ベビー用品</option>
                    <option value="ペット用品">ペット用品</option>
                    <option value="キッチン用品">キッチン用品</option>
                    <option value="アウトドア用品">アウトドア用品</option>
                </select>    
            </div>
            <button type="button" onclick="call_api()">呼び出し</button>
        </form>

        <h2>呼び出し結果:</h2>
        <h3>ステータス</h3>
        <p id="display-status"></p>
        <h3>レスポンスボディ</h3>
        <p id="display-response"></p>
    </body>
</html>
